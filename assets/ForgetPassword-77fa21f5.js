import{aw as Y,l as ee,f as l,E as te,C as S,w as se,$ as ne,p as oe,q as ae,j as e,m as re,t as ie,y as le,u as ue,a as ce,b as de,c as A,F as pe,R as z,S as N,T as G,B as xe,as as fe,ax as me,h as ge,ay as he,s as R,az as Ce}from"./index-a4a2c499.js";import{u as Ie}from"./index-47c0272c.js";import{u as Pe}from"./chunk-BFUVSDI7-6b49a874.js";import{H as je}from"./chunk-7OLJDQMT-068f4c6e.js";import{F as ve}from"./chunk-R42ZB7PB-afb9fb84.js";import{F as ye}from"./chunk-7COXQURZ-c8e7d0b6.js";import{I as we}from"./chunk-6CVSDS6C-b85f2e80.js";import"./chunk-XRMX4GAI-43ea2fb7.js";var[be,ze,Fe,Ee]=Y(),[Se,Ae]=ee({name:"PinInputContext",errorMessage:"usePinInputContext: `context` is undefined. Seems you forgot to all pin input fields within `<PinInput />`"}),U=n=>n==null?void 0:n.split("");function X(n,r){return(r==="alphanumeric"?/^[a-zA-Z0-9]+$/i:/^[0-9]+$/).test(n)}function Ne(n={}){const{autoFocus:r,value:c,defaultValue:i,onChange:p,onComplete:d,placeholder:C="â—‹",manageFocus:x=!0,otp:y=!1,id:w,isDisabled:u,isInvalid:f,type:P="number",mask:B}=n,W=l.useId(),k=w??`pin-input-${W}`,o=Fe(),[M,_]=l.useState(!0),[V,H]=l.useState(-1),[I,m]=Ie({defaultValue:U(i)||[],value:U(c),onChange:s=>p==null?void 0:p(s.join(""))});l.useEffect(()=>{if(r){const s=o.first();s&&requestAnimationFrame(()=>{s.node.focus()})}},[o]);const $=l.useCallback(s=>{if(!M||!x)return;const t=o.next(s,!1);t&&requestAnimationFrame(()=>{t.node.focus()})},[o,M,x]),j=l.useCallback((s,t,a=!0)=>{const g=[...I];g[t]=s,m(g),s!==""&&g.length===o.count()&&g.every(b=>b!=null&&b!=="")?d==null||d(g.join("")):a&&$(t)},[I,m,$,d,o]),O=l.useCallback(()=>{var s;const t=Array(o.count()).fill("");m(t);const a=o.first();(s=a==null?void 0:a.node)==null||s.focus()},[o,m]),L=l.useCallback((s,t)=>{let a=t;return(s==null?void 0:s.length)>0&&(s[0]===t.charAt(0)?a=t.charAt(1):s[0]===t.charAt(1)&&(a=t.charAt(0))),a},[]);return{getInputProps:l.useCallback(s=>{const{index:t,...a}=s,g=F=>{const h=F.target.value,E=I[t],D=L(E,h);if(D===""){j("",t);return}if(h.length>2){if(X(h,P)){const T=h.split("").filter((De,Q)=>Q<o.count());m(T),T.length===o.count()&&(d==null||d(T.join("")))}}else X(D,P)&&j(D,t),_(!0)},q=F=>{var h;if(F.key==="Backspace"&&x)if(F.target.value===""){const E=o.prev(t,!1);E&&(j("",t-1,!1),(h=E.node)==null||h.focus(),_(!0))}else _(!1)},b=()=>{H(t)},Z=()=>{H(-1)},J=V===t;return{"aria-label":"Please enter your pin code",inputMode:P==="number"?"numeric":"text",type:B?"password":P==="number"?"tel":"text",...a,id:`${k}-${t}`,disabled:u,"aria-invalid":te(f),onChange:S(a.onChange,g),onKeyDown:S(a.onKeyDown,q),onFocus:S(a.onFocus,b),onBlur:S(a.onBlur,Z),value:I[t]||"",autoComplete:y?"one-time-code":"off",placeholder:J?"":C}},[o,V,L,k,u,B,f,x,d,y,C,j,m,P,I]),id:k,descendants:o,values:I,setValue:j,setValues:m,clear:O}}function Re(n={},r=null){const{getInputProps:c}=Ae(),{index:i,register:p}=Ee();return c({...n,ref:se(p,r),index:i})}function K(n){const r=ne("PinInput",n),{children:c,...i}=oe(n),{descendants:p,...d}=Ne(i),C=ae(c).map(x=>l.cloneElement(x,{__css:r}));return e.jsx(be,{value:p,children:e.jsx(Se,{value:d,children:C})})}K.displayName="PinInput";var v=re(function(r,c){const i=Re(r,c);return e.jsx(ie.input,{...i,className:le("chakra-pin-input",r.className)})});v.displayName="PinInputField";function Ge(){const n=Pe(),r=ue(),c=ce(),[i,p]=l.useState(""),[d,C]=l.useState(null),x=de(u=>u.auth.resetemail),y=u=>{C(u)},w=async()=>{if(me("otp")===d)try{let f=await ge.post("/auth/resetpassword",{data:{email:x,password:i}});r(he()),R(n,f.data,"success"),Ce.remove("otp"),c("/login")}catch(f){R(n,f.response.data.message?f.response.data.message:"Something Went Wrong","error")}else i===""?R(n,"Enter New Password","error"):R(n,"OTP Is Incorrect","error")};return e.jsxs(e.Fragment,{children:[e.jsx(A,{marginTop:["-10px","-20px","-30px","-40px","-40px"]}),e.jsx(pe,{minH:"92.5vh",align:"center",justify:"center",bg:z("gray.50","gray.800"),children:e.jsxs(N,{spacing:8,mx:"auto",maxW:"lg",py:12,px:6,children:[e.jsxs(N,{align:"center",children:[e.jsx(je,{fontSize:"4xl",children:"Enter New Password"}),e.jsx(G,{fontSize:"lg",color:"gray.600",children:"Please enter the OTP that was sent to your email."})]}),e.jsx(A,{rounded:"lg",bg:z("white","gray.700"),boxShadow:"lg",p:8,children:e.jsxs(N,{spacing:4,children:[e.jsxs(ve,{id:"password",isRequired:!0,children:[e.jsx(ye,{children:"Enter New Password"}),e.jsx(we,{value:i,onChange:u=>p(u.target.value),type:"text"})]}),e.jsxs(N,{direction:"row",spacing:10,children:[e.jsxs(K,{otp:!0,onChange:u=>y(u),children:[e.jsx(v,{}),e.jsx(v,{}),e.jsx(v,{}),e.jsx(v,{})]}),e.jsx(xe,{bg:"blue.400",color:"white",bgColor:"rgb(0,0,0)",_hover:{boxShadow:"xl"},onClick:w,children:"Submit"})]}),e.jsxs(A,{justifyContent:"center",alignItems:"center",display:"flex",mt:2,children:["Return to"," ",e.jsx(fe,{to:"/login",children:e.jsx(G,{ml:1,textDecorationLine:"underline",color:"blue.400",children:"login"})})]})]})})]})}),e.jsx(A,{marginTop:["-10px","-20px","-30px","-40px","-40px"]})]})}export{Ge as default};
