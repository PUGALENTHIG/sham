import{d as n,w as B}from"./index-0d654f4d.js";import{m as z}from"./index-36eb0af8.js";function F(){const a=n.useRef(new Map),i=a.current,t=n.useCallback((o,s,r,c)=>{a.current.set(r,{type:s,el:o,options:c}),o.addEventListener(s,r,c)},[]),l=n.useCallback((o,s,r,c)=>{o.removeEventListener(s,r,c),a.current.delete(r)},[]);return n.useEffect(()=>()=>{i.forEach((o,s)=>{l(o.el,o.type,s,o.options)})},[l,i]),{add:t,remove:l}}function g(a){const i=a.target,{tagName:t,isContentEditable:l}=i;return t!=="INPUT"&&t!=="TEXTAREA"&&l!==!0}function q(a={}){const{ref:i,isDisabled:t,isFocusable:l,clickOnEnter:o=!0,clickOnSpace:s=!0,onMouseDown:r,onMouseUp:c,onClick:y,onKeyDown:k,onKeyUp:b,tabIndex:v,onMouseOver:m,onMouseLeave:C,...O}=a,[u,U]=n.useState(!0),[p,d]=n.useState(!1),f=F(),w=e=>{e&&e.tagName!=="BUTTON"&&U(!1)},K=u?v:v||0,h=t&&!l,P=n.useCallback(e=>{if(t){e.stopPropagation(),e.preventDefault();return}e.currentTarget.focus(),y==null||y(e)},[t,y]),E=n.useCallback(e=>{p&&g(e)&&(e.preventDefault(),e.stopPropagation(),d(!1),f.remove(document,"keyup",E,!1))},[p,f]),T=n.useCallback(e=>{if(k==null||k(e),t||e.defaultPrevented||e.metaKey||!g(e.nativeEvent)||u)return;const D=o&&e.key==="Enter";s&&e.key===" "&&(e.preventDefault(),d(!0)),D&&(e.preventDefault(),e.currentTarget.click()),f.add(document,"keyup",E,!1)},[t,u,k,o,s,f,E]),I=n.useCallback(e=>{if(b==null||b(e),t||e.defaultPrevented||e.metaKey||!g(e.nativeEvent)||u)return;s&&e.key===" "&&(e.preventDefault(),d(!1),e.currentTarget.click())},[s,u,t,b]),M=n.useCallback(e=>{e.button===0&&(d(!1),f.remove(document,"mouseup",M,!1))},[f]),L=n.useCallback(e=>{if(e.button!==0)return;if(t){e.stopPropagation(),e.preventDefault();return}u||d(!0),e.currentTarget.focus({preventScroll:!0}),f.add(document,"mouseup",M,!1),r==null||r(e)},[t,u,r,f,M]),x=n.useCallback(e=>{e.button===0&&(u||d(!1),c==null||c(e))},[c,u]),N=n.useCallback(e=>{if(t){e.preventDefault();return}m==null||m(e)},[t,m]),R=n.useCallback(e=>{p&&(e.preventDefault(),d(!1)),C==null||C(e)},[p,C]),S=z(i,w);return u?{...O,ref:S,type:"button","aria-disabled":h?void 0:t,disabled:h,onClick:P,onMouseDown:r,onMouseUp:c,onKeyUp:b,onKeyDown:k,onMouseOver:m,onMouseLeave:C}:{...O,ref:S,role:"button","data-active":B(p),"aria-disabled":t?"true":void 0,tabIndex:h?void 0:K,onClick:P,onMouseDown:L,onMouseUp:x,onKeyUp:I,onKeyDown:T,onMouseOver:N,onMouseLeave:R}}function G(a){const{wasSelected:i,enabled:t,isSelected:l,mode:o="unmount"}=a;return!!(!t||l||o==="keepMounted"&&i)}export{G as l,q as u};
